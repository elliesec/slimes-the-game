!function(e){function t(t){for(var o,r,c=t[0],l=t[1],s=t[2],h=0,d=[];h<c.length;h++)r=c[h],Object.prototype.hasOwnProperty.call(i,r)&&i[r]&&d.push(i[r][0]),i[r]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(e[o]=l[o]);for(u&&u(t);d.length;)d.shift()();return a.push.apply(a,s||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],o=!0,c=1;c<n.length;c++){var l=n[c];0!==i[l]&&(o=!1)}o&&(a.splice(t--,1),e=r(r.s=n[0]))}return e}var o={},i={0:0},a=[];function r(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=o,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/slimes-the-game/";var c=window.webpackJsonp=window.webpackJsonp||[],l=c.push.bind(c);c.push=t,c=c.slice();for(var s=0;s<c.length;s++)t(c[s]);var u=l;a.push([48,3]),n()}({39:function(e,t,n){},40:function(e,t,n){},41:function(e,t,n){},42:function(e,t,n){},43:function(e,t,n){},44:function(e,t,n){e.exports=n.p+"assets/c627a862d41d9026b5ade2a0fda5b886.jpg"},45:function(e,t,n){},46:function(e,t,n){},47:function(e,t,n){},48:function(e,t,n){"use strict";n.r(t);var o,i,a,r,c=n(0),l=n(1);function s(...e){}n(39),function(e){e.ENCOUNTER_SELECT="ENCOUNTER_SELECT",e.ENCOUNTER="ENCOUNTER",e.ENCOUNTER_END="ENCOUNTER_END"}(o||(o={})),n(40),function(e){e.OPTIONS="options",e.FLAVOUR="flavour",e.END_SCENE="endScene"}(i||(i={})),function(e){e.INIT="INIT",e.ROLL="ROLL"}(a||(a={})),function(e){e.REGISTER_ENCOUNTER="REGISTER_ENCOUNTER",e.START_ENCOUNTER="START_ENCOUNTER",e.SELECT_ENCOUNTER_OPTION="SELECT_ENCOUNTER_OPTION",e.ACTIVE_ENCOUNTER_ROLL="ACTIVE_ENCOUNTER_ROLL"}(r||(r={}));var u,h=n(19),d=n.n(h);!function(e){e.STR="strength",e.DEX="dexterity",e.CON="constitution",e.WIS="wisdom",e.INT="intelligence",e.CHA="charisma"}(u||(u={}));const p={[u.STR]:"Strength",[u.DEX]:"Dexterity",[u.CON]:"Constitution",[u.WIS]:"Wisdom",[u.INT]:"Intelligence",[u.CHA]:"Charisma"},b={[u.STR]:"STR",[u.DEX]:"DEX",[u.CON]:"CON",[u.WIS]:"WIS",[u.INT]:"INT",[u.CHA]:"CHA"},O={[u.STR]:"strength",[u.DEX]:"dexterity",[u.CON]:"constitution",[u.WIS]:"wisdom",[u.INT]:"intelligence",[u.CHA]:"charisma"};var y;function g(e){return e.type===y.DIFFICULTY_CHECK}!function(e){e.DIFFICULTY_CHECK="difficultyCheck",e.FLAVOUR="flavour"}(y||(y={}));const m=({player:e,option:t,onClick:n,fixed:o})=>{const{requirements:i,text:a}=t,r=function(e){return Object.keys(e)}(i),l=r.map(e=>`${function(e){return b[e]}(e)} ${i[e]}`),s=r.length?`[${l.join(", ")}] `:"",u=r.some(t=>!function(e,t,n){return e[O[t]]>=n}(e,t,i[t]));return Object(c.h)("li",{className:d()("OptionItem","DifficultyCheckItem",{disabled:u,fixed:!!o}),onClick:()=>n(t)},Object(c.h)("strong",null,s),Object(c.h)("span",null,a))},f=({player:e,option:t,onClick:n,fixed:o})=>g(t)?Object(c.h)(m,{player:e,option:t,onClick:n,fixed:o}):Object(c.h)("li",{className:"OptionItem"},t.text);n(41),n(42);const E=({player:e,stage:{option:t,rolls:n}})=>{const o=Object.keys(t.requirements),i=o.reduce((t,n)=>t+e[n],0)+n.reduce((e,t)=>e+t,0);return Object(c.h)("div",{className:"RollDisplay"},Object(c.h)("h4",null,"Roll Details"),Object(c.h)("ul",null,o.map(t=>Object(c.h)("li",null,Object(c.h)("strong",null,"Your ",function(e){return p[e]}(t),": "),Object(c.h)("span",null,e[t]))),n.map((e,t)=>Object(c.h)("li",null,Object(c.h)("strong",null,"Roll ",t+1,": "),Object(c.h)("span",null,e))),Object(c.h)("li",null,Object(c.h)("strong",null,"Roll Total: "),Object(c.h)("span",null,i))))},C=({player:e,stage:t,onOptionSelect:n})=>Object(c.h)("div",{className:"InitStateView"},Object(c.h)("p",null,Object(c.h)("strong",null,"What do you do?")),Object(c.h)("ul",{className:"options"},t.options.map(t=>Object(c.h)(f,{player:e,option:t,onClick:n})))),j=({player:e,activeEncounterStage:t,onRoll:n})=>{const o=t;return Object(c.h)("div",{className:"RollStateView"},Object(c.h)("ul",null,Object(c.h)(f,{player:e,option:o.option,onClick:s,fixed:!0})),Object(c.h)(E,{player:e,stage:o}),Object(c.h)("div",{className:"buttons"},Object(c.h)("button",{disabled:!!o.rolls.length&&e.willpower<1,onClick:()=>n(20,o.rolls.length?1:0)},"Roll"+(o.rolls.length?" (1 willpower)":"")),!!o.rolls.length&&Object(c.h)("button",null,"Accept")))},N=Object(l.b)((function({player:e,encounter:t},n){return{player:e,activeEncounterStage:t.active.stage}}),(function(e,{stage:t}){return{onOptionSelect(n){e(function(e,t){return{type:r.SELECT_ENCOUNTER_OPTION,payload:{stage:e,option:t}}}(t,n))},onRoll(t,n){e(function(e,t){return{type:r.ACTIVE_ENCOUNTER_ROLL,payload:{dieFaces:e,willpowerCost:t}}}(t,n))}}}))(e=>Object(c.h)("div",{className:"OptionsStageView"},e.activeEncounterStage.state===a.INIT&&Object(c.h)(C,Object.assign({},e)),e.activeEncounterStage.state===a.ROLL&&Object(c.h)(j,Object.assign({},e))));n(43);const T=({player:e,stage:t})=>function(e){return e.type===i.OPTIONS}(t)?Object(c.h)(N,{stage:t}):null,v=Object(l.b)((function({player:e},t){return{player:e}}))(({player:e,stage:t})=>Object(c.h)("div",{className:"StageView"},t.text.map(e=>Object(c.h)("p",null,e)),Object(c.h)("hr",null),Object(c.h)(T,{player:e,stage:t}))),S=n(44);class w extends c.a{render({activeEncounter:e}){const{encounter:t,stage:n}=e,o=t.stages.find(e=>e.id===n.id);return Object(c.h)("div",{className:"EncounterScene"},Object(c.h)("div",{className:"encounter-text"},Object(c.h)("div",{className:"card"},Object(c.h)("h3",null,"Encounter!"),Object(c.h)(v,{stage:o}))),Object(c.h)("div",{className:"encounter-image"},Object(c.h)("div",{className:"card"},Object(c.h)("img",{src:S,alt:"Lewd Pictures"}))))}}const R=Object(l.b)((function(e){return{activeEncounter:e.encounter.active}}),(function(e){return{}}))(w);var I;function _(e){return{type:I.SET_SCENE,payload:e}}!function(e){e.SET_SCENE="SET_SCENE"}(I||(I={})),n(45);class x extends c.a{constructor(e){super(e),this.state={selectedEncounter:null},this.onSelectChange=this.onSelectChange.bind(this),this.onSelectEncounter=this.onSelectEncounter.bind(this)}render({encounters:e}){var t;return Object(c.h)("div",{className:"EncounterSelection"},Object(c.h)("h3",null,"Encounter Selection"),Object(c.h)("div",{className:"encounter-stats"},Object(c.h)("ul",{className:"encounter-stats-list"},Object(c.h)("li",null,Object(c.h)("span",{className:"key"},"Encounters Available: "),Object(c.h)("span",{className:"value"},e.length))),Object(c.h)("hr",null),Object(c.h)("div",{className:"encounter-selection-form"},Object(c.h)("label",{htmlFor:"encounter-select"},Object(c.h)("span",null,"Select Encounter: "),Object(c.h)("select",{id:"encounter-select",value:null===(t=this.state.selectedEncounter)||void 0===t?void 0:t.id,onChange:this.onSelectChange},Object(c.h)("option",{value:""}),e.map(e=>Object(c.h)("option",{value:e.id},e.name)))),Object(c.h)("button",{disabled:!this.state.selectedEncounter,onClick:this.onSelectEncounter},"Start Encounter"))))}onSelectChange(e){var t;const n=e.currentTarget.value,o=null!==(t=this.props.encounters.find(e=>e.id===n))&&void 0!==t?t:null;this.setState({selectedEncounter:o})}onSelectEncounter(){const{selectedEncounter:e}=this.state;e&&this.props.onSelectEncounter(e)}}x.defaultProps={encounters:[],onSelectEncounter:s};const k=Object(l.b)((function(e){return{encounters:Object.values(e.encounter.all)}}),(function(e){return{onSelectEncounter(t){e(function(e){return{type:r.START_ENCOUNTER,payload:e}}(t)),e(_(o.ENCOUNTER))}}}))(x);n(46);const L=Object(l.b)((function({currentScene:e}){return{currentScene:e}}))(({currentScene:e})=>Object(c.h)("div",{className:"EncounterView"},(e=>{switch(e){case o.ENCOUNTER_SELECT:return Object(c.h)(k,null);case o.ENCOUNTER:return Object(c.h)(R,null);case o.ENCOUNTER_END:return Object(c.h)("div",null,"Encounter End");default:return null}})(e)));var P;function U(e){return{type:P.SET_PLAYER,payload:e}}function Y(e,t){return{type:P.SET_PLAYER_STAT,payload:{statName:e,value:t}}}!function(e){e.SET_PLAYER="SET_PLAYER",e.SET_PLAYER_DESCRIPTION="SET_PLAYER_DESCRIPTION",e.SET_PLAYER_STAT="SET_PLAYER_STAT"}(P||(P={}));const A={[P.SET_PLAYER]:function(e,{payload:t}){return t===e?e:Object.assign({},t)},[P.SET_PLAYER_DESCRIPTION]:function(e,{payload:{key:t,value:n}}){return e[t]===n?e:Object.assign(Object.assign({},e),{[t]:n})},[P.SET_PLAYER_STAT]:function(e,{payload:{statName:t,value:n}}){return e[t]===n?e:Object.assign(Object.assign({},e),{[t]:n})},[r.ACTIVE_ENCOUNTER_ROLL]:function(e,{payload:{willpowerCost:t}}){return t?Object.assign(Object.assign({},e),{willpower:e.willpower-t}):e}};n(47);const D=e=>Object(c.h)("label",{htmlFor:e.id},Object(c.h)("span",null,e.label,":"),Object(c.h)("input",Object.assign({},e))),W=Object(l.b)((function(e){return{player:e.player}}),(function(e){return{onPlayerReset(){e(U({name:"Heroine",maxWillpower:10,willpower:10,strength:2,dexterity:2,constitution:2,wisdom:2,intelligence:2,charisma:2}))},onNameChange(t){const n=t.currentTarget.value;e(function(e,t){return{type:P.SET_PLAYER_DESCRIPTION,payload:{key:"name",value:t}}}(0,n))},onStrengthChange(t){const n=Number(t.currentTarget.value);e(Y("strength",n))},onDexterityChange(t){const n=Number(t.currentTarget.value);e(Y("dexterity",n))},onConstitutionChange(t){const n=Number(t.currentTarget.value);e(Y("constitution",n))},onWisdomChange(t){const n=Number(t.currentTarget.value);e(Y("wisdom",n))},onIntelligenceChange(t){const n=Number(t.currentTarget.value);e(Y("intelligence",n))},onCharismaChange(t){const n=Number(t.currentTarget.value);e(Y("charisma",n))},onMaxWillpowerChange(t){const n=Number(t.currentTarget.value);e(Y("maxWillpower",n))},onWillpowerChange(t){const n=Number(t.currentTarget.value);e(Y("willpower",n))}}}))(({player:e,onPlayerReset:t,onNameChange:n,onStrengthChange:o,onDexterityChange:i,onConstitutionChange:a,onWisdomChange:r,onIntelligenceChange:l,onCharismaChange:s,onMaxWillpowerChange:u,onWillpowerChange:h})=>Object(c.h)("div",{className:"PlayerConfigPanel"},Object(c.h)("h3",{className:"header-with-buttons"},Object(c.h)("span",null,"Player"),Object(c.h)("button",{onClick:t},"Reset")),Object(c.h)(D,{id:"name-input",label:"Name",type:"text",value:e.name,onChange:n}),Object(c.h)("h4",null,"Attributes"),Object(c.h)("div",{className:"attribute-config"},Object(c.h)(D,{id:"strength-input",label:"Strength",type:"number",value:e.strength,min:1,onChange:o}),Object(c.h)(D,{id:"dexterity-input",label:"Dexterity",type:"number",value:e.dexterity,min:1,onChange:i}),Object(c.h)(D,{id:"constitution-input",label:"Constitution",type:"number",value:e.constitution,min:1,onChange:a}),Object(c.h)(D,{id:"wisdom-input",label:"Wisdom",type:"number",value:e.wisdom,min:1,onChange:r}),Object(c.h)(D,{id:"intelligence-input",label:"Intelligence",type:"number",value:e.intelligence,min:1,onChange:l}),Object(c.h)(D,{id:"charisma-input",label:"Charisma",type:"number",value:e.charisma,min:1,onChange:s})),Object(c.h)("hr",null),Object(c.h)("h4",null,"Resources"),Object(c.h)(D,{id:"max-willpower-input",label:"Max Willpower",type:"number",value:e.maxWillpower,min:1,onChange:u}),Object(c.h)(D,{id:"willpower-input",label:"Willpower",type:"number",value:e.willpower,min:1,onChange:h}))),F={id:"encounter1",name:"An Old Chest",initialStageId:0,stages:[{id:0,type:i.OPTIONS,text:["You see an old chest. It appears to be locked."],options:[{type:y.DIFFICULTY_CHECK,text:"Break the chest open",requirements:{strength:2},difficultyCheck:10,outcomes:{criticalSuccess:{text:["You smash the chest so hard that it is reduced to splinters. Inside is the ruined body of a mimic as well as some gear left from a previous - less fortunate - adventurer."]},success:{text:["You strike the chest hard, breaking open the wooden frame. Blood and flailing tendrils spring forth immediately. The chest was a mimic! Fortunately you have managed to wound it without placing yourself in danger."],resourceMods:{willpower:1}},failure:{text:["You strike the chest but your blow ricochets off leaving only superficial damage. To your surprise the chest opens in response and strong tendrils spring forth, entangling your limbs."]},criticalFailure:{text:["Holding your weapon shakily you do your best to open the chest with force. Your strike throws you off balance and your blow barely glaces off the chest while you fall flat on the floor.","While you scramble to regain your dignity the chest, surprisingly, opens. Before you can even regain your footing strong tendrils have launched from the chest and ensnared you thoroughly. You are slowly dragged towards the mimic."]}}},{type:y.DIFFICULTY_CHECK,text:"Pick the lock",requirements:{dexterity:3},difficultyCheck:16,outcomes:{criticalSuccess:{text:["With well honed skill you deftly tease the lock open. In one smooth motion you remove the padlock and open the chest - all without making a sound.","Inside you find a heaped mass of tentacles. A dormant mimic! You were lucky not to disturb it."],resourceMods:{willpower:1}},success:{text:["After some time working at it the heavy padlock on the chest gives a satisfying “click”. Before you can investigate the contents, however the chest springs open on its own. You leap backwards just in time to avoid the grasp of a mimic’s tendrils."]},failure:{text:["You pick and pick at the lock but your patience yields before it does. Eventually you are forced to concede and walk away empty handed."]},criticalFailure:{text:["You insert your tools into the lock only to have them snap the moment you apply pressure. In frustration you kick the chest in anger. To your shock, and initial delight, the chest springs open… to reveal a mass of thrashing tentacles.","The mimic coils around you in a flash, ensnaring all your limbs before you can back away. You are slowly dragged towards the mimic."]}}},{type:y.DIFFICULTY_CHECK,text:"Check the chest for traps",requirements:{wisdom:1},difficultyCheck:18,outcomes:{criticalSuccess:{text:["Careful observation combined with long years of experience tells you one thing: this is a mimic. Only a fool would try to open one carelessly. You should either prepare to deal with it or walk away now."]},success:{text:["Carefully studying the chest you notice a few things amiss. It is positioned conspicuously - something you wouldn’t expect when storing valuables. It is also noticeably less dusty than the surrounding, suggesting that it was moved here recently. You have no firm proof, but you definitely suspect a trap."]},failure:{text:["You don’t notice anything out of the ordinary."]},criticalFailure:{text:["While your attention is focused on the chest something else focuses its attention on you..."]}}},{type:y.DIFFICULTY_CHECK,text:"Open the chest using magic",requirements:{intelligence:6},difficultyCheck:18,outcomes:{criticalSuccess:{text:["The valuable items from the chest teleport directly to you. Oddly some of them seem to be coated in digestive fluid. It seems you looted not only the chest but the stomach contents of its occupying mimic. Good thing you were precise with your incantation."]},success:{text:["The contents of the chest teleport directly to you. Unfortunately this includes a dormant mimic. You can try to fight it or back away now."]},failure:{text:["Your spell fizzles. Magic is hard."]},criticalFailure:{text:["Your magic runs amok. Instead of teleporting the contents of the chest directly to you, you find yourself teleported to them! Worse, this chest appears to have been the hiding spot for a mimic. You are trapped in a locked chest surrounded by tentacles."]}}},{type:y.FLAVOUR,text:"Ignore the chest",nextStageId:30}]},{id:10,type:i.OPTIONS,text:["You attempt to fight the mimic!"],options:[]},{id:20,type:i.OPTIONS,text:["You attempt to escape."],options:[]},{id:30,type:i.END_SCENE,text:["You ignore the chest and move on."],continueText:"Move on"}]};class H extends c.a{constructor(e){super(e),e.load()}render({player:e}){return Object(c.h)("div",{className:"CombatSandbox1"},Object(c.h)("div",{className:"config-panel"},Object(c.h)("div",{className:"panel-header"},Object(c.h)("h2",null,"Configuration")),Object(c.h)(W,null)),Object(c.h)("div",{className:"encounter-panel"},Object(c.h)("div",{className:"panel-header"},Object(c.h)("h2",null,"Encounter")),Object(c.h)(L,null)))}}H.defaultProps={load:s};const M=Object(l.b)((function(e){return{player:e.player}}),(function(e){return{load(){var t;e((t=F,{type:r.REGISTER_ENCOUNTER,payload:t})),e(U({name:"Heroine",maxWillpower:10,willpower:10,strength:2,dexterity:2,constitution:2,wisdom:2,intelligence:2,charisma:2})),e(_(o.ENCOUNTER_SELECT))}}}))(H);var V=n(3),q=n(20);const K={[I.SET_SCENE]:function(e,{payload:t}){return t}},B={[r.START_ENCOUNTER]:function(e,{payload:t}){return{encounter:t,stage:(n=t.initialStageId,{id:n,state:a.INIT})};var n},[r.SELECT_ENCOUNTER_OPTION]:function(e,{payload:t}){const{stage:n,option:o}=t;let i;return g(o)?i=function(e,t){return{id:e.id,state:a.ROLL,option:t,rolls:[]}}(n,o):(console.warn("Unhandled option type:",o.type),i=null),Object.assign(Object.assign({},e),{stage:i})},[r.ACTIVE_ENCOUNTER_ROLL]:function(e,{payload:{dieFaces:t}}){const n=1+Math.floor(Math.random()*t),o=e.stage;return Object.assign(Object.assign({},e),{stage:Object.assign(Object.assign({},o),{rolls:[...o.rolls,n]})})}},G={[r.REGISTER_ENCOUNTER]:function(e,{payload:t}){return e[t.id]&&console.warn(`Warning: duplicate encounter registration for ID "${t.id}"`),Object.assign(Object.assign({},e),{[t.id]:t})}},X=Object(V.combineReducers)({all:function(e={},t){const n=G[t.type];return n?n(e,t):e},active:function(e=null,t){const n=B[t.type];return n?n(e,t):e}}),$=Object(V.combineReducers)({player:function(e={name:"Heroine",maxWillpower:10,willpower:10,strength:2,dexterity:2,constitution:2,wisdom:2,intelligence:2,charisma:2},t){const n=A[t.type];return n?n(e,t):e},encounter:X,currentScene:function(e=o.ENCOUNTER_SELECT,t){const n=K[t.type];return n?n(e,t):e}}),z=Object(V.createStore)($,Object(q.composeWithDevTools)());n(5);const J=document.getElementById("app-root");Object(c.k)(Object(c.h)(l.a,{store:z},Object(c.h)(M,null)),J)},5:function(e,t,n){}});
//# sourceMappingURL=combatSandbox1.7a9bdc095989d6b07619.js.map